<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SoDaFormat-1.0.0-main:f160581: SoDa::Format print stuff.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SoDaFormat-1.0.0-main:f160581
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="classSoDa_1_1Format.html" title="A format object that may be &quot;filled in&quot; with integer, float, double, string, or character values.">SoDa::Format</a> print stuff. </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="classSoDa_1_1Format.html" title="A format object that may be &quot;filled in&quot; with integer, float, double, string, or character values.">SoDa::Format</a> is a class that allows intelligent formatting of integer, floating point, string, and character values into std::string objects or for output to a stream. The concept is inspired by the much more capable Qt::QString's formatting features. If you can afford the library dependency, use Qt. It's quite good.</p>
<p><a class="el" href="classSoDa_1_1Format.html" title="A format object that may be &quot;filled in&quot; with integer, float, double, string, or character values.">SoDa::Format</a> is meant to improve upon the tremendously awkward, antiquated, and bizarre stream output features of the standard template library. (C++ stream IO was a giant step backward from the comparatively flexible and intuitive FORTRAN "FORMAT" scheme. There isn't much in the computing world that is a giant step backward from FORTRAN circa 1975.)</p>
<p>One could use the BOOST format facility. (One could also eat brussels sprouts for breakfast, but it isn't <em>my</em> kind of thing. Is it yours?) boost::format is tremendously powerful and fabulously documented. It may be easily extended by beings living in some of the outer reaches of the Horse Head nebula. I just don't grok it myself. And carrying around a boost dependency is like growing an extra thumb &ndash; it is useful at times, but it becomes less and less so as time goes on, and you can never quite remember why you got it in the first place.</p>
<p>What really motivated me to write <a class="el" href="classSoDa_1_1Format.html" title="A format object that may be &quot;filled in&quot; with integer, float, double, string, or character values.">SoDa::Format</a> was the lack of an "engineering notation" format for floating point numbers in any of the common formatting facilities. As a dyed in the wool MKS engineer, this drives me right up the wall. Exponents should be multiples of three. If Adam had done any floating point arithmetic, he would have written it down in engineering notation. (Perhaps he did, and then lost it all when the serpent screwed everything up.)</p>
<h2>Enough of the ranting, let's look at an example.</h2>
<p>We'll look at segments of the test program <a class="el" href="Format__Test_8cxx.html">Format_Test.cxx</a>. It is worth looking at the whole file, just not all at once. This text is the doxygen equivalent of touring the Louvre on a motorcycle.</p>
<p>To jump right in, let's imagine that we've got a set of variables that we want to write to std::cout.</p>
<ul>
<li>i an integer</li>
<li>ef a double precision floating point number</li>
<li>c a character</li>
<li>fred a string</li>
</ul>
<p>We could print all of those out like this:</p>
<div class="fragment"><div class="line">  std::cout &lt;&lt; <a class="code" href="classSoDa_1_1Format.html">SoDa::Format</a>(<span class="stringliteral">&quot;print 5 like this:  %0\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;let&#39;s print 5 again %0\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;%1 looks much better in engineering notation %2\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;Sometimes I just want to print a %% sign like this %0%%\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;I think that shirt he&#39;s wearing fits %3 to a %4\n&quot;</span>)</div><div class="line">    .<a class="code" href="classSoDa_1_1Format.html#ace90af8b389453b3f6fc79cb63ad33c4">addI</a>(i)</div><div class="line">    .<a class="code" href="classSoDa_1_1Format.html#accf39e1ff77009c47dbe8bf2d1235912">addF</a>(ef, <span class="charliteral">&#39;f&#39;</span>)    </div><div class="line">    .<a class="code" href="classSoDa_1_1Format.html#accf39e1ff77009c47dbe8bf2d1235912">addF</a>(ef, <span class="charliteral">&#39;e&#39;</span>)</div><div class="line">    .<a class="code" href="classSoDa_1_1Format.html#ad7c0dad0b2a4aae905c3dfced10b941b">addS</a>(fred)</div><div class="line">    .<a class="code" href="classSoDa_1_1Format.html#a6a32fc00878a476e63d77c337ee724cd">addC</a>(c);</div><div class="line">  </div></div><!-- fragment --><p>The result looks like this:</p>
<pre class="fragment">print 5 like this:  5
let's print 5 again 5
32157.500 looks much better in engineering notation   32.158e3
Sometimes I just want to print a % sign like this 5%
I think that shirt he's wearing fits Fred to a T</pre><p>Let's tease things apart here.</p>
<p>The story starts with the creation of a format object like this</p>
<div class="fragment"><div class="line">  <a class="code" href="classSoDa_1_1Format.html">SoDa::Format</a> sft(<span class="stringliteral">&quot;Avogadro&#39;s number: %0\n&quot;</span>); </div></div><!-- fragment --><p>(In the first demo, we created the object and used it all on the same line. we can do that, or we can create a format and keep it around for a while.)</p>
<p>The format class has a bunch of methods that "fill in" parts of the format string. The methods: <a class="el" href="classSoDa_1_1Format.html#ace90af8b389453b3f6fc79cb63ad33c4" title="insert a signed integer into the format string">SoDa::Format::addI</a>, <a class="el" href="classSoDa_1_1Format.html#ab0c9b858a5522d77e38f3e99718c3645" title="insert an unsigned integer into the format string">SoDa::Format::addU</a>, <a class="el" href="classSoDa_1_1Format.html#accf39e1ff77009c47dbe8bf2d1235912" title="insert a float or double into the format string">SoDa::Format::addF</a>, <a class="el" href="classSoDa_1_1Format.html#ad7c0dad0b2a4aae905c3dfced10b941b" title="insert a string into the format string">SoDa::Format::addS</a>, <a class="el" href="classSoDa_1_1Format.html#a6a32fc00878a476e63d77c337ee724cd" title="insert a character into the format string">SoDa::Format::addC</a> print integers, unsigned integers, floats or doubles, strings, and characters.</p>
<p>As each "addX" method is processed in turn, it fills in its placeholders. The first addX call fills in all the %0 placeholders <em>no matter how many of them are in the string</em>. The second fills in the %1 placeholders, and so on.</p>
<p>The floating point print method &ndash; <a class="el" href="classSoDa_1_1Format.html#accf39e1ff77009c47dbe8bf2d1235912" title="insert a float or double into the format string">SoDa::Format::addF</a> &ndash; can print its value in one of four formats</p><ul>
<li>f &ndash; corresponding to printf's "%f" specifier (more or less)</li>
<li>g &ndash; .... "%g"</li>
<li>s &ndash; in scientific notation with the integer part between 1 and 9 inclusive.</li>
<li>e &ndash; in engineering notation with the integer part between 1 and 999 inclusive, and the exponent a multiple of 3.</li>
</ul>
<p>So we could print Avogadro's number in two ways: the normal way, and the right way.</p>
<div class="fragment"><div class="line">  <span class="comment">// Print Avogadro&#39;s number the way we all remembered from high school. </span></div><div class="line">  <span class="keywordtype">double</span> av = 6.02214076e23;</div><div class="line">  std::cout &lt;&lt; sft.addF(av, <span class="charliteral">&#39;s&#39;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// But all that 10^23 jazz is the result of the evil CGS system.</span></div><div class="line">  <span class="comment">// Let&#39;s do this the way a respectable MKS user would have wanted it.</span></div><div class="line">  <span class="comment">// first, let&#39;s reuse our format:</span></div><div class="line"><span class="comment"></span>  sft.reset();</div><div class="line">  <span class="comment">// and now print</span></div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Here&#39;s how right thinking people write &quot;</span></div><div class="line">            &lt;&lt; sft.addF(av, <span class="charliteral">&#39;e&#39;</span>);</div></div><!-- fragment --><p> which produces </p><pre class="fragment">Avogadro's number: 6.022e+23
Here's how right thinking people write Avogadro's number:  602.214e21
</pre><p>So once we've invoked the first addX method on a format, all the "%0" markers have been replaced. But we can "re-use" a format object by calling its <a class="el" href="classSoDa_1_1Format.html#a6943df2179a19f8aa19aa88bc9db1142" title="reset the format string to its original value, with all the placeholders restored.">SoDa::Format::reset</a> method. as we did here </p><div class="fragment"><div class="line">  sft.reset();</div></div><!-- fragment --><p> Now the format string is restored to its original state with all the "%0" and "%1" and whatever markers back in place.</p>
<p>Each of the addX methods returns a reference to the format object they just fiddled with. The reset method does too. That's how this snippet works:</p>
<div class="fragment"><div class="line">      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> p = 1; p &lt; 4; p++) {</div><div class="line">        std::cout &lt;&lt; format.reset().addC(fmt).addI(p).addF(ef, fmt, p+3, p);</div><div class="line">      }</div></div><!-- fragment --><p>The various methods provide arguments to set the field width and the number of digits after the decimal point. When I get <em>really</em> focused, I'll add the ability to specify the number of significant figures instead. This is really far more useful than the "%fN.P" scheme that we've been living with all these years. But don't get me started on significant digits.</p>
<p>Oh what the hell, we've got me started.</p>
<p>For my money, it is rarely important to know anything to more than one significant digit.</p>
<p>Perhaps even one binary digit.</p>
<h2>Namespace</h2>
<p><a class="el" href="classSoDa_1_1Format.html" title="A format object that may be &quot;filled in&quot; with integer, float, double, string, or character values.">SoDa::Format</a> is enclosed in the <a class="el" href="namespaceSoDa.html" title="Not much else is spelled that way, so we&#39;re probably not going to have too many collisions with code ...">SoDa</a> namespace because it is inevitiable that there are lots of classes out there called "Format." Perhaps you have written one of them. Naming a class "Format" is like naming a street "Oak:" It might make lots of sense, but you're going to have to reconcile yourself that there's a street with the same name one town over and sometimes your pizza is going to get mis-routed.</p>
<p>So Format is in the <a class="el" href="namespaceSoDa.html" title="Not much else is spelled that way, so we&#39;re probably not going to have too many collisions with code ...">SoDa</a> namespace. <a class="el" href="namespaceSoDa.html" title="Not much else is spelled that way, so we&#39;re probably not going to have too many collisions with code ...">SoDa</a> is from <a href="https://kb1vc.github.io/SoDaRadio/">SoDaRadio</a> though the <a class="el" href="classSoDa_1_1Format.html" title="A format object that may be &quot;filled in&quot; with integer, float, double, string, or character values.">SoDa::Format</a> class is a completely independent chunk 'o code. Most of the code I'll release will be in the <a class="el" href="namespaceSoDa.html" title="Not much else is spelled that way, so we&#39;re probably not going to have too many collisions with code ...">SoDa</a> namespace, just to avoid the Oak Street problem. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jan 1 2021 16:16:51 for SoDaFormat-1.0.0-main:f160581 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
